var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r};define(["require","exports","Presentation/Scripts/TFS/TFS","Presentation/Scripts/TFS/TFS.OM","Presentation/Scripts/TFS/TFS.UI.Controls","WorkItemTracking/Scripts/TFS.WorkItemTracking"],function(n,t,i,r,u,f){var o,e;(function(n){(function(n){(function(n){var i=function(){function n(n,t,i){var r=this;this.TF=n;this.TFS_OM=t;this.TFS_WorkItemTracking=i;this.WorkItemManager=this.TFS_OM.TfsTeamProjectCollection.getDefaultConnection().getService(this.TFS_WorkItemTracking.WorkItemStore).workItemManager;this.WorkItemManager.attachWorkItemChanged(function(n,t){(t.change===r.TFS_WorkItemTracking.WorkItemChangeType.Reset||t.change===r.TFS_WorkItemTracking.WorkItemChangeType.SaveCompleted)&&window.setTimeout(function(){return r.colorCodeWorkItem(t.workItem)},100)})}return n.prototype.init=function(){new t(this.getModuleBase()).css("ColorCodingEnhancement.css").inject();this.isTaskBoard()&&this.addColorCoding()},n.prototype.addColorCoding=function(){var n=this,i=$(".tbTile").map(function(n,t){return t.id.match(/\d+$/)[0]}).get(),t="beginGetWorkItems",r=this.TF.globalProgressIndicator.actionStarted(t);this.WorkItemManager.beginGetWorkItems(i,function(i){$.each(i,function(t,i){n.colorCodeWorkItem(i)});n.TF.globalProgressIndicator.actionCompleted(t)})},n.prototype.colorCodeWorkItem=function(t){for(var f,r=t.getFieldValue("Activity"),e=t.getFieldValue("System.Id"),u=$("#tile-"+e),i=0;i<n.ActivityTypes.length;i++)f=n.ActivityTypes[i],u.removeClass(f);r&&u.addClass(r)},n.prototype.getModuleBase=function(){return this.TF.getModuleBase(e._typeName)},n.prototype.isTaskBoard=function(){return $(".taskboard").length>0},n.ActivityTypes=["Deployment","Design","Development","Documentation","Requirements","Testing"],n}(),t;n.ColorCodingApplicator=i;t=function(){function n(n){this.baseUrl=n;this._items=[]}return n.prototype.css=function(n){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=this.baseUrl+n,this._items.push(t),this},n.prototype.inject=function(){this._items.forEach(function(n){return document.body.appendChild(n)});this._items=[]},n.prototype.js=function(n){var t=document.createElement("script");return t.type="text/javascript",t.src=this.baseUrl+n,this._items.push(t),this},n}()})(n.Extensions||(n.Extensions={}));var t=n.Extensions})(n.TfsWebAccess||(n.TfsWebAccess={}));var t=n.TfsWebAccess})(o||(o={}));e=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({},t))},t.prototype.initialize=function(){var n=new o.TfsWebAccess.Extensions.ColorCodingApplicator(i,r,f);n.init()},t._typeName="ColorCodingEnhancement",t}(u.BaseControl);i.initClassPrototype(e,{});u.Enhancement.registerEnhancement(e,".taskboard")});
/*
//# sourceMappingURL=ColorCodingEnhancement.min.js.map
*/